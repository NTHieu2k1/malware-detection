import pickle as pkl
from src.utilities.file import get_project_root_directory
from pathlib import Path


class ModelFileIO:
    def __init__(self):
        self.model_directory = get_project_root_directory() / Path('models')

    def save_model(self, model, file_name):
        model_file_path = self.model_directory / Path(file_name)
        with open(model_file_path, 'wb') as model_file_save:
            pkl.dump(model, model_file_save)

    def load_models(self) -> list:
        all_model_paths = list(self.model_directory.glob('*.pkl'))
        loaded_models = list()
        for model_path in all_model_paths:
            with open(str(model_path), 'rb') as model_file_load:
                loaded_model = pkl.load(model_file_load)
            loaded_models.append(loaded_model)
        return loaded_models
